<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sBylinkarka</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-9</depth>
  <persistent>0</persistent>
  <parentName>parNPC</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Set up
event_inherited();
alarm[1] = 1;
a = 10;

//ds_priority_add(akce,"prochazka2",5);

//ds_priority_add(akce,"prochazka2",10);
//ds_priority_add(akce,"prochazka3",8);
//ds_priority_add(akce,"prochazka-1",2);

//alarm[0] = 1;
/*
LoF Diaries - NPC

Ok, takže GOAP vážené dámy a pánové? 
No to mě tak trochu poser.

Př:

1) Chci si dojít pokecat s kovářem (eng1)
2) Hráč mě přijde znásilnit (eng1000)
3) Chci mu utéct (eng1001)

-&gt; takže uteču
zavolám DB, ve které uchovávám všemožné sračky co bych rád a jejich prioritu (eng)
Tak jsem utekl, zavolám zpropadenou DB a ptám se, co bych ještě rád.
Do záznamu přidám "jen tak se poflakovat (eng2)" a budu se flákat.
*/

//scrCutscenePlay(self, cts1, false, 1);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Call GOAP DB

event_user(12);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Dialogues

if (status == 0)
   {
   dialogueMessage("Alice", "Co tě sem přivádí, drahoušku?", 0);
   dialogueMessage("Petr", "Jsem zástupce královského písaře Dobromila, Petr. Vyšetřuji vraždu dívky před Vavřincovou farou.", 0);
   dialogueMessage("Alice", "Ano, ano. Je to hrůza, docela si to pamatuji...", 0);
   dialogueMessage("Alice", "Bylo to někdy... někdy před... hm. Ale já si to tak jasně pamatuji..", 0);
   action_id = 0;
   dialogueOptions(0);
   status = 1;
   }   
else if (status == 1)
   {
   dialogueMessage("Alice", "No ano, ano, už si to vybavuji. Byla jsem večer sbírat Kalokvět... na bolesti hlavy.");
   dialogueMessage("Alice", "Bože, jen kdyby mě tak nebolela ta hlava, nedokážu se soustředit.");
   dialogueMessage("Alice", "Petře, byl bys tak dobrý a donesl mi trochu kalokvětu? Čaj z něj mi vždycky pomůže.");   
   action_id = 1;
   status = 2;
   dialogueOptions(1);
   }
else if (status == 2)
   {
   if (substatus == 1)
   {
   dialogueMessage("Alice", "Ah, jsi zpět. Neseš mi ty listy kalokvětu?");
   action_id = 2;
   dialogueOptions(2);
   }
   }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="24">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Dialogue options

switch(action_id)
                 {
                 case (0): 
                      {                        
                        oAnswer.polozka[0] = "Před čtyřmi dny, v pondělí."; 
                        oAnswer.polozka_activated[0] = 1;
                        
                        oAnswer.polozka[4] = "Zkusíme to později.";                        
                        oAnswer.polozka_activated[4] = 1;     
                         break;                       
                      }
                 case (1):
                      {                        
                        oAnswer.polozka[0] = "Dobře, jdětě si sednout dovnitř, za chvilku jsem zpět."; 
                        oAnswer.polozka_activated[0] = 1;
                        
                        oAnswer.polozka[1] = "Čaj z kalokvětu je jedovatý! Nemůžete ho pít."; 
                        oAnswer.polozka_activated[1] = 1;
                                                
                        oAnswer.polozka[4] = "Zkusíme to později.";                        
                        oAnswer.polozka_activated[4] = 1; 
                         break;                           
                      }                 
                 case (2):
                      {                        
                        oAnswer.polozka[0] = "Tady to je."; 
                        oAnswer.polozka_activated[0] = 1;
                                 
                        oAnswer.polozka[4] = "Ještě ne.";                        
                        oAnswer.polozka_activated[4] = 1; 
                         break;                           
                      }                   
                 }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="23">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Actions
oMessagebox.option[oMessagebox.message_current] = -1;

if (status == 1) 
   {
   if (index == 0)
      {
        event_user(15);     
      }
  if (index == 4)
      {
       dialogueEnd();
      }
   }
else if (status == 2) 
   {
   if (index == 0)
      {
        scrCutscenePlay(self, cutsceneAlice1, false, 1);
        scrQuestEntryAdd(enumQuests.questKalokvetProAlici, "Opojné listy kalokvětu", "Bylinkářka Alice trpí bolestmi hlavy, požádala mě o nějaké listy kalokvětu. Na čaj by měly stačit tři lístky, víc jí toho nosit nebudu.", "??????", "[Hlavní úkol]"); 
        substatus = 1;     
        
                        inst = instance_create(view_xview, view_yview, oAchievement);
inst.header = "Nový úkol!";
inst.text = "Kalokvět pro Alici";
inst.index = medalEnum.quest;
inst.medalType = 0;  
      }
  if (index == 1)
      {
       scrCutscenePlay(self, cutsceneAlice1, false, 1);
      }
  if (index == 4)
      {
       dialogueEnd();
      }
   }      
dialogueNext()
   
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="22">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// GOAP DB

if (ds_priority_size(akce) &gt; 0)
   {
   queue++;
   provadena_akce = ds_priority_find_max(akce);
   show_message(provadena_akce);
   
if (provadena_akce = "prochazka2")
   {
    show_message(""+ string(id) + " NASTAVUJE X,Y,S");
    
    goapX = x+48;
    goapY = y+32;
    goapS = 0.5;
    
    myPath = path_add();
    if (mp_grid_path(oController.grid,myPath,x,y,goapX,goapY,0))
       {
       path_start(myPath,1,path_action_stop,0);
       }
       else {show_message("Nemohu najít cestu :(");}
   }
if (string_count("pohyb_k_mysi",provadena_akce) &gt; 0)
   {
   show_message(""+ string(id) + " NASTAVUJE X,Y,S");
   number = abs(ds_priority_find_max(akce));

    goapX = listX[| number];
    goapY = listY[| number];
    goapS = listS[| number];
    
    myPath = path_add();
    if (mp_grid_path(oController.grid,myPath,x,y,goapX,goapY,0))
       {
       path_start(myPath,1,path_action_stop,0);
       show_message("X: "+string(x)+"#"+"Y: "+string(y)+"#"+"Xx: "+string(goapX)+"#"+"Yy: "+string(goapY)+"#");
       }
       else {show_message("Nemohu najít cestu :(");}
   
   }
   
   }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Work finished

ds_priority_delete_max(akce);
event_user(12); // GOAP DB
//goapRunning = 0;
image_speed = 0;
image_index = 0;
path_delete(myPath);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw self

event_inherited();

/*
if (ds_priority_size(akce) &gt; 0)
{
akce2 = ds_priority_create();
ds_priority_copy(akce2,akce);

for (a = 0; a &lt;= ds_priority_size(akce2); a++)
    {
     m =  ds_priority_find_max(akce2);
     v =  ds_priority_find_priority(akce2,m);
     
     draw_text(x+40,y+a*15,m+" ("+string(v)+")");
     ds_priority_delete_max(akce2);
     
     if (a = ds_priority_size(akce2)-1)
        {
         draw_text(x+40,y+a*15+30,"Ted provadim: "+string(provadena_akce));
        }
    }
    
ds_priority_destroy(akce2);
}
if (mouse_check_button_pressed(mb_left))
   {
   // ADD STACK TO DB
   ds_list_add(listX,mouse_x);
   ds_list_add(listY,mouse_y);
   ds_list_add(listS,random_range(0.5,1.5));
   
   stack--;
   ds_priority_add(akce,"pohyb_k_mysi"+string(abs(stack)),stack);
   event_user(12);
   }
*/

//draw_text(x, y - 32, "Idle image: " + string(idleImage));
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
